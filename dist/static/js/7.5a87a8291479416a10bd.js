webpackJsonp([7],{"/0UN":function(e,t,a){"use strict";String,String,String,String,String,Number,Array,Object,Number,Boolean;var s={name:"checker",props:{defaultItemClass:String,selectedItemClass:String,disabledItemClass:String,type:{type:String,default:"radio"},value:[String,Number,Array,Object],max:Number,radioRequired:Boolean},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e),this.$emit("on-change",e)}},data:function(){return{currentValue:this.value}}},r={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"vux-checker-box"},[this._t("default")],2)},staticRenderFns:[]};var i=a("VU/8")(s,r,!1,function(e){a("Luh7")},null,null);t.a=i.exports},"9wSW":function(e,t){},IkC2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),r=a.n(s),i=a("1sNz"),n=a("ABCa"),o=a("odqc"),l=a("Znkm"),d=a("fBcm"),u=a("b+jt"),c=a("1DHf"),p=a("rHil"),h=a("pDNl"),v=a("7Ah8"),f=a("2sLL"),g=a("QTi7"),m=a("cHu4"),b=a("FHgB"),x=a.n(b),$=a("/0UN"),y=a("hGvq"),O=a("/kga"),I=(i.a,n.a,o.a,l.a,d.a,u.a,c.a,p.a,h.a,v.a,f.a,g.a,m.a,x.a,$.a,y.a,O.a,{name:"upgradeOrder",components:{ViewBox:i.a,XHeader:n.a,Tab:o.a,TabItem:l.a,Swiper:d.a,SwiperItem:u.a,Cell:c.a,Group:p.a,XInput:h.a,PopupPicker:v.a,XButton:f.a,Box:g.a,XAddress:m.a,ChinaAddressV4Data:x.a,Checker:$.a,CheckerItem:y.a,XDialog:O.a},created:function(){"{}"===r()(this.$route.params)?this.queryUserAddress():(this.getGoodsObj.addressId=this.$route.params.addressId,this.getGoodsObj.addressName=this.$route.params.addressName),this.queryUser()},mounted:function(){for(var e=[],t=0;t<30;t++)e.push(this.addressData[t].name);this.provinceData.push(e)},computed:{payMoney:function(){return"经销商"===this.getGoodsObj.level[0]?2980:"区县合伙人"===this.getGoodsObj.level[0]?29800:"城市合伙人"===this.getGoodsObj.level[0]?298e3:"分公司"===this.getGoodsObj.level[0]?6e5:0}},data:function(){return{index:0,checkerWhich:2,userInfo:{},productInfo:{},getGoodsObj:{quantity:"",addressId:"",proxyProvince:[],proxyCity:"",proxyArea:"",addressName:"",addressValue:[],level:[]},orderList:[],addressData:x.a,provinceData:[],levelData:[],showToast:!1}},methods:{queryUser:function(){var e=this;this.$api.queryUser({}).then(function(t){if(200===t.code){e.userInfo=t.data.user,e.queryProduct();var a=[];a=1===e.userInfo.vipLevel?["区县合伙人","城市合伙人","分公司"]:2===e.userInfo.vipLevel?["城市合伙人","分公司"]:3===e.userInfo.vipLevel?["分公司"]:4===e.userInfo.vipLevel?["已经是最高级别"]:["经销商","区县合伙人","城市合伙人","分公司"],e.levelData.push(a)}else e.$vux.toast.text(t.message,"top")})},queryUserAddress:function(){var e=this;this.$api.queryUserAddress({}).then(function(t){200===t.code&&(t.data.address.length<1?e.getGoodsObj.addressName="无":(e.getGoodsObj.addressId=t.data.address[0].id,e.getGoodsObj.addressName=t.data.address[0].province+t.data.address[0].city+t.data.address[0].area+t.data.address[0].detail))})},queryProduct:function(){var e=this;this.$api.queryProduct().then(function(t){if(200===t.code)switch(e.productInfo=t.data.product,e.userInfo.vipLevel){case 0:e.price=.7*e.productInfo.price;break;case 1:e.price=.65*e.productInfo.price;break;case 2:e.price=.6*e.productInfo.price;break;case 3:e.price=.55*e.productInfo.price;break;case 4:e.price=.5*e.productInfo.price;break;default:e.price=e.productInfo.price}else e.$vux.toast.text(t.message,"top")})},insertUpgradeOrder:function(e){var t=this,a={};if(!this.getGoodsObj.addressId)return this.$vux.toast.text("请添加地址后再报单~","top");if("经销商"===this.getGoodsObj.level[0])a.vipLevel=1;else if("区县合伙人"===this.getGoodsObj.level[0]){var s=this.$refs.address1.nameValue.split(" ");a.address=s[0]+"-"+s[1]+"-"+s[2],a.vipLevel=2}else if("城市合伙人"===this.getGoodsObj.level[0]){var r=this.$refs.address2.nameValue.split(" ");a.address=r[0]+"-"+r[1],a.vipLevel=3}else"分公司"===this.getGoodsObj.level[0]&&(a.address=this.getGoodsObj.proxyProvince[0],a.vipLevel=4);a.addressId=this.getGoodsObj.addressId,a.productId=this.productInfo.productId,a.isOffline=e,this.$api.insertUpgradeOrder(a).then(function(a){200===a.code?(0===e?t.onBridgeReady(a.data.appId,a.data.nonceStr,a.data.package,a.data.paySign,a.data.timeStamp):t.$vux.toast.text("添加线下支付订单成功~","top"),t.showToast=!1):t.$vux.toast.text(a.message,"top")})},onBridgeReady:function(e,t,a,s,i){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e,timeStamp:i.toString(),nonceStr:t,package:a,signType:"MD5",paySign:s},function(e){alert(r()(e)),"get_brand_wcpay_request:ok"==e.err_msg?this.$vux.toast.text("支付成功","top"):this.$vux.toast.text("支付失败","top")})},toSelectAddress:function(){this.$router.push({name:"selectAddress",params:{addressId:this.getGoodsObj.addressId,addressName:this.getGoodsObj.addressName,from:"upgradeOrder"}})},toSale:function(){this.$router.push({name:"sales"})},selectChecker:function(e){console.log(e)}}}),k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upgradeOrder"},[a("x-header",{staticClass:"vux-1px-b my-header",attrs:{"left-options":{backText:"",preventGoBack:!0},fixed:""},on:{"on-click-back":function(t){e.toSale()}}},[e._v("申请报单")]),e._v(" "),a("div",{staticClass:"swiper-box"},[a("group",{attrs:{"label-width":"4.5em","label-margin-right":"2em","label-align":"right"}},[a("cell",{attrs:{title:"拿货地址","align-items":"flex-start",value:e.getGoodsObj.addressName,"value-align":"left","is-link":""},nativeOn:{click:function(t){e.toSelectAddress()}}}),e._v(" "),a("popup-picker",{attrs:{title:"申请等级",data:e.levelData,placeholder:"请选择","value-text-align":"left"},model:{value:e.getGoodsObj.level,callback:function(t){e.$set(e.getGoodsObj,"level",t)},expression:"getGoodsObj.level"}}),e._v(" "),a("cell",{attrs:{title:"支付金额","align-items":"flex-start",value:e.payMoney,"value-align":"left"}}),e._v(" "),a("popup-picker",{directives:[{name:"show",rawName:"v-show",value:"分公司"===e.getGoodsObj.level[0],expression:"getGoodsObj.level[0] === '分公司'"}],attrs:{title:"代理省份",data:e.provinceData,placeholder:"请选择地址","value-text-align":"left"},model:{value:e.getGoodsObj.proxyProvince,callback:function(t){e.$set(e.getGoodsObj,"proxyProvince",t)},expression:"getGoodsObj.proxyProvince"}}),e._v(" "),a("x-address",{directives:[{name:"show",rawName:"v-show",value:"区县合伙人"===e.getGoodsObj.level[0],expression:"getGoodsObj.level[0] === '区县合伙人'"}],ref:"address1",staticClass:"addresstitle",attrs:{title:"代理县区","value-text-align":"left",list:e.addressData,placeholder:"请选择地址","hide-district":!1}}),e._v(" "),a("x-address",{directives:[{name:"show",rawName:"v-show",value:"城市合伙人"===e.getGoodsObj.level[0],expression:"getGoodsObj.level[0] === '城市合伙人'"}],ref:"address2",staticClass:"addresstitle",attrs:{title:"代理城市","value-text-align":"left",list:e.addressData,placeholder:"请选择地址","inline-desc":"","hide-district":!0}})],1),e._v(" "),a("x-button",{staticClass:"submit-btn",attrs:{type:"primary"},nativeOn:{click:function(t){e.showToast=!0}}},[e._v("立即支付")])],1),e._v(" "),a("x-dialog",{staticClass:"dialog-demo",attrs:{"hide-on-blur":""},model:{value:e.showToast,callback:function(t){e.showToast=t},expression:"showToast"}},[a("div",{staticStyle:{padding:"15px"}},[a("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.insertUpgradeOrder(0)}}},[e._v("微信支付")]),e._v(" "),a("x-button",{attrs:{type:"default"},nativeOn:{click:function(t){e.insertUpgradeOrder(1)}}},[e._v("线下支付")])],1),e._v(" "),a("div",{on:{click:function(t){e.showToast=!1}}},[a("span",{staticStyle:{"font-size":"16px"}},[e._v("关闭")])])])],1)},staticRenderFns:[]};var j=a("VU/8")(I,k,!1,function(e){a("9wSW")},"data-v-511a7ff1",null);t.default=j.exports},Luh7:function(e,t){},QTi7:function(e,t,a){"use strict";String;var s={name:"box",props:{gap:String}},r={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{style:{margin:this.gap}},[this._t("default")],2)},staticRenderFns:[]},i=a("VU/8")(s,r,!1,null,null,null);t.a=i.exports},dPZ0:function(e,t){},hGvq:function(e,t,a){"use strict";var s=a("mvHQ"),r=a.n(s),i=a("pFYg"),n=a.n(i);String,Number,Object,Boolean;var o={name:"checker-item",props:{value:{type:[String,Number,Object],required:!0},disabled:Boolean},watch:{disabled:function(e){e&&"radio"===this.$parent.type&&this.value===this.$parent.currentValue&&(this.$parent.currentValue="")}},computed:{classNames:function(){var e=this,t="string"==typeof this.value||"number"==typeof this.value,a={"vux-tap-active":!this.disabled};if(this.$parent.defaultItemClass&&(a[this.$parent.defaultItemClass]=!0),this.$parent.selectedItemClass){var s=!1;if("radio"===this.$parent.type)t&&this.$parent.currentValue===this.value?s=!0:"object"===n()(this.value)&&l(this.$parent.currentValue,this.value)&&(s=!0);else if("string"==typeof this.value)this.$parent.currentValue.indexOf(this.value)>-1&&(s=!0);else if(this.$parent.currentValue&&this.$parent.currentValue.length){s=this.$parent.currentValue.filter(function(t){return l(t,e.value)}).length>0}a[this.$parent.selectedItemClass]=s}return this.$parent.disabledItemClass&&(a[this.$parent.disabledItemClass]=this.disabled),a}},methods:{select:function(){"radio"===this.$parent.type?this.selectRadio():this.selectCheckbox()},selectRadio:function(){this.disabled||(this.$parent.currentValue===this.value?this.$parent.radioRequired||(this.$parent.currentValue=""):this.$parent.currentValue=this.value),this.$emit("on-item-click",this.value,this.disabled)},selectCheckbox:function(){this.$parent.currentValue&&null!==this.$parent.currentValue||(this.$parent.currentValue=[]);var e="string"==typeof this.value||"number"==typeof this.value;if(!this.disabled){var t=-1;(t=e?this.$parent.currentValue.indexOf(this.value):this.$parent.currentValue.map(function(e){return r()(e)}).indexOf(r()(this.value)))>-1?this.$parent.currentValue.splice(t,1):(!this.$parent.max||this.$parent.max&&null!==this.$parent.currentValue&&this.$parent.currentValue.length<this.$parent.max)&&(this.$parent.currentValue&&this.$parent.currentValue.length||(this.$parent.currentValue=[]),this.$parent.currentValue.push(this.value))}this.$emit("on-item-click",this.value,this.disabled)}}};function l(e,t){return r()(e)===r()(t)}var d={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"vux-checker-item",class:this.classNames,on:{click:this.select}},[this._t("default")],2)},staticRenderFns:[]};var u=a("VU/8")(o,d,!1,function(e){a("dPZ0")},null,null);t.a=u.exports}});
//# sourceMappingURL=7.5a87a8291479416a10bd.js.map