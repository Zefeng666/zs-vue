webpackJsonp([19],{NVq3:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("1sNz"),i=s("ABCa"),a=s("odqc"),n=s("Znkm"),o=s("fBcm"),d=s("b+jt"),c=s("1DHf"),u=s("rHil"),p=s("pDNl"),v=s("2sLL"),l=(r.a,i.a,a.a,n.a,o.a,d.a,c.a,u.a,p.a,v.a,{name:"shippingApplication",components:{ViewBox:r.a,XHeader:i.a,Tab:a.a,TabItem:n.a,Swiper:o.a,SwiperItem:d.a,Cell:c.a,Group:u.a,XInput:p.a,XButton:v.a},created:function(){this.queryUser(),this.queryHistoryShipOrder(),this.queryShipOrder()},computed:{},data:function(){return{index:0,checkerWhich:2,userInfo:{},orderList:[],shipOrderList:[]}},methods:{queryUser:function(){var e=this;this.$api.queryUser({}).then(function(t){200===t.code?e.userInfo=t.data.user:e.$vux.toast.text(t.message,"top")})},queryHistoryShipOrder:function(){var e=this;this.$vux.loading.show({text:""}),this.$api.queryHistoryShipOrder({pageNo:1,pageSize:100}).then(function(t){200===t.code&&(e.orderList=t.data.items),e.$vux.loading.hide()})},queryShipOrder:function(){var e=this;this.$vux.loading.show({text:""}),this.$api.queryShipOrder({pageNo:1,pageSize:1e3}).then(function(t){200===t.code&&(e.shipOrderList=t.data.items),e.$vux.loading.hide()})},shipOrder:function(e,t){var s=this;this.$api.shipOrder({orderId:e,isSelf:t}).then(function(e){200===e.code?(s.$vux.toast.text("操作成功","top"),s.queryShipOrder()):s.$vux.toast.text(e.message,"top")})},toSale:function(){this.$router.push({name:"sales"})},selectChecker:function(e){0===e?this.queryShipOrder():1===e&&this.queryHistoryShipOrder()},checkOrder:function(e){if(0===e.orderStatus)return"未支付";if(1===e.orderStatus)return"待发货";if(1===e.isCompanyDelivery)return"公司发货";var t=localStorage.getItem("uid");return e.trueShipUid==t?"已发货":"上级发货"}}}),h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"shippingApplication"},[s("x-header",{staticClass:"vux-1px-b my-header",attrs:{"left-options":{backText:"",preventGoBack:!0},fixed:""},on:{"on-click-back":function(t){e.toSale()}}},[e._v("发货申请")]),e._v(" "),s("tab",{staticClass:"my-tab",attrs:{"line-width":2,"active-color":"#2a93f5"},model:{value:e.index,callback:function(t){e.index=t},expression:"index"}},[s("tab-item",{staticClass:"vux-center vux-1px-t",attrs:{selected:""},on:{"on-item-click":e.selectChecker}},[e._v("发货申请")]),e._v(" "),s("tab-item",{staticClass:"vux-center vux-1px-t",on:{"on-item-click":e.selectChecker}},[e._v("历史订单")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.index,expression:"index === 0"}],staticClass:"swiper-box"},[s("div",e._l(e.shipOrderList,function(t,r){return t.product?s("div",{key:r,staticClass:"order-box vux-1px-b"},[s("p",[s("span",[e._v("商品："+e._s(t.product.name))]),e._v(" "),s("span",{staticClass:"text-right"},[e._v("申请数量："+e._s(t.order.quantity+"瓶"))])]),e._v(" "),s("p",[s("span",[e._v("用户："+e._s(t.user.username))]),e._v(" "),s("span",{staticClass:"text-right"},[e._v("手机号："+e._s(t.user.mobile))])]),e._v(" "),s("p",[s("span",[e._v("收货地址："+e._s(t.userAddress.province)+e._s(t.userAddress.city)+e._s(t.userAddress.area)+e._s(t.userAddress.detail))])]),e._v(" "),s("p",[s("span",[e._v("创建时间："+e._s(e._f("formatDate")(t.order.createTime)))])]),e._v(" "),-1===t.order.isUpgrade?s("p",{staticStyle:{"text-align":"right"}},[s("span",{staticStyle:{color:"rgb(247, 76, 49)"}},[e._v("该单为升级单，须公司确认")])]):s("p",{staticStyle:{"text-align":"right"}},[s("x-button",{attrs:{mini:""},nativeOn:{click:function(s){e.shipOrder(t.order.id,1)}}},[e._v("转上级发货")]),e._v(" "),s("x-button",{directives:[{name:"show",rawName:"v-show",value:e.userInfo.vipLevel>1,expression:"userInfo.vipLevel > 1"}],attrs:{type:"primary",mini:""},nativeOn:{click:function(s){e.shipOrder(t.order.id,0)}}},[e._v("发货")])],1)]):e._e()}))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1===e.index,expression:"index === 1"}],staticClass:"tab-swiper"},e._l(e.orderList,function(t,r){return t.product?s("div",{key:r,staticClass:"order-box vux-1px-b"},[s("p",[s("span",[e._v("商品："+e._s(t.product.name))]),e._v(" "),s("span",{staticClass:"text-right"},[e._v("申请数量："+e._s(t.order.quantity+"瓶"))])]),e._v(" "),s("p",[s("span",[e._v("用户："+e._s(t.user.username))]),e._v(" "),s("span",{staticClass:"text-right"},[e._v("手机号："+e._s(t.user.mobile))])]),e._v(" "),s("p",[s("span",[e._v("收货地址："+e._s(t.userAddress.province)+e._s(t.userAddress.city)+e._s(t.userAddress.area)+e._s(t.userAddress.detail))])]),e._v(" "),s("p",[s("span",[e._v("创建时间："+e._s(e._f("formatDate")(t.order.createTime)))])]),e._v(" "),s("p",{staticStyle:{"text-align":"right"}},[s("span",[e._v("状态："+e._s(e.checkOrder(t.order)))])])]):e._e()}))],1)},staticRenderFns:[]};var _=s("VU/8")(l,h,!1,function(e){s("tnT5")},"data-v-25159bc6",null);t.default=_.exports},tnT5:function(e,t){}});
//# sourceMappingURL=19.6d1c1b5e8443fa22ef4a.js.map